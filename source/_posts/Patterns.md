---
title: Patterns
date: 2021-05-28 16:06:54
tags:
---

## 原型

class 中提供一个 clone 方便通过原型示例深浅拷贝原型创建对象，从而优化性能。
一般结合工厂使用

```
const newCompenont= Fatroy.create(new propotypeCompenont())


prototype
```

## 单例

单例模式是指在内存中只会创建且仅创建一次对象的设计模式。在程序中多次使用同一个对象且作用相同时，为了防止频繁地创建对象使得内存飙升，单例模式可以让程序仅在内存中创建一个对象，让所有需要调用的地方都共享这一单例对象。
单例是一把双刃剑。
代码耦合度变高。如果大量单例对象间交叉引用，会让代码变的很乱，不方便后续维护；
而且工程如果大了之后，也不方便拆分工程，引起编译时间过长。可以适当的拆分重组一下功能，让引用尽可能变成单向的。也可以引入事件中心，来解耦合。
功能安全性。成员变量容易被其他地方随意修改，不好排查。某些方法可能是特定场合才使用的，但是其他人并不知道。
线程安全。涉及到线程相关的操作，非常容易出事。

## 工厂方法/抽象工厂模式（对外隐藏创建过程）

工厂方法：抽象具体 class，new 过程，直接暴露一个工厂
抽象工厂：多厂组合生成一个产品（相互依赖，相关），抽象具体分厂，直接暴露一个总厂

## 建造者模式

构建过程复杂问题：构建一个神舟飞船
Director: 指挥者,控制建造顺序流程，一般统一流程（可以灵活砍掉：如建造产品只有一种）
Builder:建造者抽象类，
ConcreteBuilder：具体的建造者类（不利于内部结构复杂、多变产品、依赖产品属性（修改时维护成本较大））
Product：具体产品对象（功能属性差异较小，有相似共同点、如游戏中的角色）

各个具体的建造者相互独立，可以很方便地替换具体建造者或增加新的具体建造者，有利于系统的扩展。
封装性好，构建和表示分离，客户端不必知道产品内部组成的细节，便于控制细节风险。
可以更加精细地控制产品的创建过程，建造者可以对创建过程逐步细化，而不对其他模块产生任何影响。

## 外观模式、门面模式（Facade Pattern）

外观模式，为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。
外观模式是一种对象结构型模式。
如：wx.xxx qq.xxx taro.xxx uni.xxx cc.xxxx

## 装饰器模式（加功能）

动态地给一个对象添加一些额外的职责。就增加功能来说，Decorator 模式相比生成子类更为灵活。

## 适配器模式（兼容）

类的适配器模式：以继承来完成适配
对象的适配器模式：通过关联对象完成适配

将目标类和适配者类解耦，通过引入一个适配器类来重用现有的适配者类，无须修改原有结构。
增加了类的透明性和复用性，将具体的业务实现过程封装在适配者类中，对于客户端类而言是透明的，而且提高了适配者的复用性，同一个适配者类可以在多个不同的系统中复用。
灵活性和扩展性都非常好，通过使用配置文件，可以很方便地更换适配器，也可以在不修改原有代码的基础上增加新的适配器类，完全符合“开闭原则”。

MiniGameAdapter(封装内嵌小游戏跳转，所需要的接口，例如上传分数、获取排行榜)
axios（通过设配器适配多种小程序）

## 代理模式

代理模式是指利用访问代理的方式，代替访问原始对象。这种模式有很多使用场景，比如对已有对象做增强、做按需初始化等等。

```
new Proxy
```

## 桥接模式

将抽象部分与实现部分分离，使它们都可以独立地进行变化。
类中若多维度行为或状态，进行拆分抽象单独一唯独类，从而从类中引用新层次的对象，拥有期状态或行为。
抽象部分：高阶控制层，不负责具体实现（程序的 GUI 层、业务层抽象通用接口）
实现部分：具体底层 api 实现具体功能（操作系统的 API、底层具体能力）

```
class Briage{
    logger
    localstorage
    request
}
```

## 享元模式

内部状态通用且一般不行进行改变（只读），进行引用，提供对象共享。
外部状态进行扩展实现, 实现复用优化性能。
例如：对网盘公司来说，价值巨大，对用户来说，没有价值。

```
class FlyweightFactory {
  public getFlyWeight(key) {
    if (this.flyweight[key]) {
      return this.flyweight[key]
    }

    const flyweight = new Flyweight()
    this.flyweight[key] = flyweight
    return flyweight
  }
}
```

## 部分整体模式（组合模式）

组合模式（Composite），将对象组合成树形结构以表示“部分-整体”的层次结构，用户对单个对象和组合对象的使用具有一致性
